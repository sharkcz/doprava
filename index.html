<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="utf-8">
    <title>doprava</title>
    <link rel="stylesheet" type="text/css" media="all" href="css/main.css">
    <script type="text/javascript" src="js/sharkodlak/functions.js"></script>
    <script type="text/javascript" src="js/sharkodlak/ajax.js"></script>
    <script type="text/javascript" src="js/sharkodlak/errors.js"></script>
    <script type="text/javascript" src="js/sharkodlak/patterns/Listener.js"></script>
    <script type="text/javascript" src="js/sharkodlak/patterns/Listenable.js"></script>
    <script type="text/javascript" src="js/sharkodlak/webGl/Engine.js"></script>
    <script type="text/javascript" src="js/sharkodlak/webGl/Shader.js"></script>
    <script type="text/javascript" src="js/sharkodlak/webGl/FragmentShader.js"></script>
    <script type="text/javascript" src="js/sharkodlak/webGl/VertexShader.js"></script>
    <script type="text/javascript" src="js/sharkodlak/webGl/Program.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            'use strict'; // JavaScript strict mode
            var canvasSelector = 'canvas';
            var glEngine = new sharkodlak.webGl.Engine(canvasSelector);
            var fragmentShader = new sharkodlak.webGl.FragmentShader();
            var vertexShader = new sharkodlak.webGl.VertexShader();
            var main = function(gl, program) {
                gl.clearColor(0.0, 0.0, 0.0, 1.0);
                gl.clear(gl.COLOR_BUFFER_BIT);
                
                var colors = [
                    1.0, 0.0, 0.0,
                    0.0, 1.0, 0.0,
                    0.0, 0.0, 1.0
                ];
                colors.dimensions = 3;
                var vertices = [
                    0.7, 0.7,
                    0.7, -0.7,
                    -0.5, 0
                ];
                vertices.dimensions = 2;
                var indices = [
                    0, 1,
                    1, 2,
                    2, 0
                ];
                
                var colorBuffer = gl.createBuffer();
                var colorLocation = gl.getAttribLocation(program, 'color');
                gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);
                gl.vertexAttribPointer(colorLocation, colors.dimensions, gl.FLOAT, false, 0, 0);
                gl.enableVertexAttribArray(colorLocation);
                
                var vertexBuffer = gl.createBuffer();
                var positionLocation = gl.getAttribLocation(program, 'position');
                gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
                gl.vertexAttribPointer(positionLocation, vertices.dimensions, gl.FLOAT, false, 0, 0);
                gl.enableVertexAttribArray(positionLocation);
                
                var indexBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
                gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint8Array(indices), gl.STATIC_DRAW);
                gl.drawElements(gl.LINES, indices.length, gl.UNSIGNED_BYTE, 0);
            };
            
            fragmentShader.setSourceUrl('shaders/fragment.gl');
            vertexShader.setSourceUrl('shaders/vertex.gl');
            glEngine.debug = true;
            glEngine.setProgram(fragmentShader, vertexShader, main);
        }
    </script>
</head>
<body>

<canvas></canvas>